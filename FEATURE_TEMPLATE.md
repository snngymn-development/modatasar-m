# üéØ Yeni Feature Mod√ºl√º - Template

> Bu template'i kullanarak yeni mod√ºl ekleyebilirsin.  
> **Copy-paste yaparak** veya **Cursor'a g√∂stererek** kullan.

---

## üîß HIZLI KULLANIM

### Cursor'a ≈û√∂yle S√∂yle:

```
"FEATURE_TEMPLATE.md dosyasƒ±nƒ± kullanarak Product mod√ºl√º olu≈ütur.
T√ºm {{Feature}} ve {{feature}} deƒüi≈ükenlerini 'Product' ve 'product' ile deƒüi≈ütir."
```

### Manuel Kullanƒ±m:

1. **{{Feature}}** ‚Üí `Product` (PascalCase)
2. **{{feature}}** ‚Üí `product` (kebab-case/camelCase)
3. **{{Features}}** ‚Üí `Products` (√ßoƒüul)
4. **{{features}}** ‚Üí `products` (√ßoƒüul)

---

## üìÅ 1. DOMAIN LAYER (packages/core)

### 1.1. Entity

**Dosya:** `packages/core/src/entities/{{Feature}}.ts`

```typescript
import type { ID, Currency } from '../types/common'

/**
 * {{Feature}} domain entity
 */
export interface {{Feature}} {
  id: ID
  name: string
  description?: string
  price?: Currency     // cents (opsiyonel)
  createdAt: string    // ISO date
}
```

### 1.2. Validation Schema

**Dosya:** `packages/core/src/validation/{{feature}}.schema.ts`

```typescript
import { z } from 'zod'

export const {{Feature}}Schema = z.object({
  id: z.string(),
  name: z.string().min(1, 'Name is required'),
  description: z.string().optional(),
  price: z.number().int().nonnegative().optional(),
  createdAt: z.string()
})

export type {{Feature}}Input = z.infer<typeof {{Feature}}Schema>
```

### 1.3. Validation Index Export

**Dosya:** `packages/core/src/validation/index.ts`

```typescript
// Mevcut exports...
export * from './{{feature}}.schema'  // ‚Üê EKLE
```

### 1.4. Shared Export

**Dosya:** `packages/shared/src/index.ts`

```typescript
// Mevcut exports...
export * from '@core/entities/{{Feature}}'
export * from '@core/validation/{{feature}}.schema'  // ‚Üê EKLE
```

**Build:**
```bash
pnpm --filter @deneme1/core build
pnpm --filter @deneme1/shared build
```

---

## üíæ 2. DATABASE LAYER (Prisma)

### 2.1. Prisma Model

**Dosya:** `backend/api/prisma/schema.prisma`

```prisma
model {{Feature}} {
  id          String   @id @default(cuid())
  name        String
  description String?
  price       Int?     // cents
  createdAt   DateTime @default(now())
}
```

### 2.2. Migration

```bash
cd backend/api
npx prisma migrate dev --name add_{{features}}
npx prisma generate
```

---

## üîô 3. BACKEND LAYER (NestJS)

### Klas√∂r: `backend/api/src/modules/{{features}}/`

### 3.1. Module

**Dosya:** `{{features}}.module.ts`

```typescript
import { Module } from '@nestjs/common'
import { {{Features}}Controller } from './{{features}}.controller'
import { {{Features}}Service } from './{{features}}.service'
import { PrismaService } from '../../common/prisma.service'

@Module({
  controllers: [{{Features}}Controller],
  providers: [{{Features}}Service, PrismaService]
})
export class {{Features}}Module {}
```

### 3.2. Service

**Dosya:** `{{features}}.service.ts`

```typescript
import { Injectable, NotFoundException } from '@nestjs/common'
import { PrismaService } from '../../common/prisma.service'
import { Create{{Feature}}Dto, Update{{Feature}}Dto } from './dto'

@Injectable()
export class {{Features}}Service {
  constructor(private prisma: PrismaService) {}

  create(dto: Create{{Feature}}Dto) {
    return this.prisma.{{feature}}.create({ data: dto })
  }

  findAll() {
    return this.prisma.{{feature}}.findMany()
  }

  async findOne(id: string) {
    const item = await this.prisma.{{feature}}.findUnique({ where: { id } })
    if (!item) {
      throw new NotFoundException(`{{Feature}} #${id} not found`)
    }
    return item
  }

  update(id: string, dto: Update{{Feature}}Dto) {
    return this.prisma.{{feature}}.update({ where: { id }, data: dto })
  }

  remove(id: string) {
    return this.prisma.{{feature}}.delete({ where: { id } })
  }
}
```

### 3.3. Controller

**Dosya:** `{{features}}.controller.ts`

```typescript
import { Controller, Get, Post, Put, Delete, Param, Body } from '@nestjs/common'
import { ApiTags, ApiOperation, ApiResponse } from '@nestjs/swagger'
import { {{Features}}Service } from './{{features}}.service'
import { Create{{Feature}}Dto, Update{{Feature}}Dto } from './dto'

@ApiTags('{{features}}')
@Controller('{{features}}')
export class {{Features}}Controller {
  constructor(private readonly service: {{Features}}Service) {}

  @Get()
  @ApiOperation({ summary: 'Get all {{features}}' })
  @ApiResponse({ status: 200, description: 'Return all {{features}}' })
  findAll() {
    return this.service.findAll()
  }

  @Get(':id')
  @ApiOperation({ summary: 'Get {{feature}} by id' })
  @ApiResponse({ status: 200, description: 'Return {{feature}}' })
  findOne(@Param('id') id: string) {
    return this.service.findOne(id)
  }

  @Post()
  @ApiOperation({ summary: 'Create {{feature}}' })
  @ApiResponse({ status: 201, description: '{{Feature}} created' })
  create(@Body() dto: Create{{Feature}}Dto) {
    return this.service.create(dto)
  }

  @Put(':id')
  @ApiOperation({ summary: 'Update {{feature}}' })
  @ApiResponse({ status: 200, description: '{{Feature}} updated' })
  update(@Param('id') id: string, @Body() dto: Update{{Feature}}Dto) {
    return this.service.update(id, dto)
  }

  @Delete(':id')
  @ApiOperation({ summary: 'Delete {{feature}}' })
  @ApiResponse({ status: 200, description: '{{Feature}} deleted' })
  remove(@Param('id') id: string) {
    return this.service.remove(id)
  }
}
```

### 3.4. DTO

**Dosya:** `dto.ts`

```typescript
import { ApiProperty } from '@nestjs/swagger'
import { IsString, IsNumber, IsOptional, Min } from 'class-validator'

export class Create{{Feature}}Dto {
  @ApiProperty()
  @IsString()
  name: string

  @ApiProperty({ required: false })
  @IsString()
  @IsOptional()
  description?: string

  @ApiProperty({ required: false, description: 'Price in cents' })
  @IsNumber()
  @IsOptional()
  @Min(0)
  price?: number
}

export class Update{{Feature}}Dto {
  @ApiProperty({ required: false })
  @IsString()
  @IsOptional()
  name?: string

  @ApiProperty({ required: false })
  @IsString()
  @IsOptional()
  description?: string

  @ApiProperty({ required: false, description: 'Price in cents' })
  @IsNumber()
  @IsOptional()
  @Min(0)
  price?: number
}
```

### 3.5. AppModule

**Dosya:** `backend/api/src/app.module.ts`

```typescript
// Import ekle
import { {{Features}}Module } from './modules/{{features}}/{{features}}.module'

@Module({
  imports: [
    HealthModule,
    CustomersModule,
    OrdersModule,
    RentalsModule,
    {{Features}}Module  // ‚Üê EKLE
  ],
  providers: [PrismaService],
  exports: [PrismaService]
})
export class AppModule {}
```

---

## üé® 4. FRONTEND WEB (React + Vite)

### Klas√∂r: `frontend/web/src/components/{{Features}}/`

### 4.1. Table Component

**Dosya:** `{{Features}}Table.tsx`

```typescript
import React from 'react'
import { fmtTRY } from '@core/utils/money'
import type { {{Feature}} } from '@shared'

interface {{Features}}TableProps {
  rows: {{Feature}}[]
}

export function {{Features}}Table({ rows }: {{Features}}TableProps) {
  return (
    <table className="w-full bg-white border rounded-lg">
      <thead>
        <tr className="text-left">
          <th className="p-2">Name</th>
          <th className="p-2">Description</th>
          <th className="p-2">Price</th>
          <th className="p-2">Created</th>
        </tr>
      </thead>
      <tbody>
        {rows.map((row) => (
          <tr key={row.id} className="border-t">
            <td className="p-2">{row.name}</td>
            <td className="p-2">{row.description || '-'}</td>
            <td className="p-2">{row.price != null ? fmtTRY(row.price) : '-'}</td>
            <td className="p-2">{new Date(row.createdAt).toLocaleDateString()}</td>
          </tr>
        ))}
      </tbody>
    </table>
  )
}
```

### 4.2. Form Component

**Dosya:** `{{Feature}}Form.tsx`

```typescript
import React, { useState } from 'react'
import { {{Feature}}Schema } from '@shared'

interface {{Feature}}FormProps {
  onSubmit: (data: any) => void
}

export function {{Feature}}Form({ onSubmit }: {{Feature}}FormProps) {
  const [form, setForm] = useState({
    name: '',
    description: '',
    price: 0
  })

  const handleSubmit = () => {
    const parsed = {{Feature}}Schema.safeParse({
      id: crypto.randomUUID(),
      name: form.name,
      description: form.description || undefined,
      price: form.price ? Number(form.price) : undefined,
      createdAt: new Date().toISOString()
    })

    if (!parsed.success) {
      alert('Validation failed: ' + parsed.error.errors[0].message)
      return
    }

    onSubmit(parsed.data)
  }

  return (
    <div className="mb-4 p-4 border rounded-lg">
      <input
        placeholder="Name"
        value={form.name}
        onChange={(e) => setForm((f) => ({ ...f, name: e.target.value }))}
        className="border rounded p-2 mr-2"
      />
      <input
        placeholder="Description"
        value={form.description}
        onChange={(e) => setForm((f) => ({ ...f, description: e.target.value }))}
        className="border rounded p-2 mr-2"
      />
      <input
        type="number"
        placeholder="Price (cents)"
        value={form.price}
        onChange={(e) => setForm((f) => ({ ...f, price: e.target.value }))}
        className="border rounded p-2 mr-2"
      />
      <button onClick={handleSubmit} className="border rounded p-2 bg-blue-500 text-white">
        Save
      </button>
    </div>
  )
}
```

### 4.3. Page Component

**Dosya:** `frontend/web/src/pages/{{Features}}Page.tsx`

```typescript
import React, { useEffect, useState } from 'react'
import { get{{Features}}, create{{Feature}} } from '@/lib/api'
import { {{Feature}}Form } from '@/components/{{Features}}/{{Feature}}Form'
import { {{Features}}Table } from '@/components/{{Features}}/{{Features}}Table'
import { PageShell } from '@/components/PageShell'
import type { {{Feature}} } from '@shared'

export default function {{Features}}Page() {
  const [rows, setRows] = useState<{{Feature}}[]>([])

  const loadData = async () => {
    const { data } = await get{{Features}}()
    setRows(data)
  }

  useEffect(() => {
    loadData()
  }, [])

  const handleCreate = async (payload: any) => {
    await create{{Feature}}(payload)
    await loadData()
  }

  return (
    <PageShell title="{{Features}}">
      <{{Feature}}Form onSubmit={handleCreate} />
      <{{Features}}Table rows={rows} />
    </PageShell>
  )
}
```

### 4.4. API Client

**Dosya:** `frontend/web/src/lib/api.ts`

```typescript
// Mevcut kod...

// {{Features}} API
export const get{{Features}} = () => api.get('/{{features}}')
export const get{{Feature}} = (id: string) => api.get(`/{{features}}/${id}`)
export const create{{Feature}} = (data: any) => api.post('/{{features}}', data)
export const update{{Feature}} = (id: string, data: any) => api.put(`/{{features}}/${id}`, data)
export const delete{{Feature}} = (id: string) => api.delete(`/{{features}}/${id}`)
```

---

## üì± 5. FRONTEND MOBILE (React Native)

### 5.1. API Client

**Dosya:** `frontend/mobile/src/api/{{features}}.ts`

```typescript
import axios from 'axios'

const baseURL = process.env.EXPO_PUBLIC_API_URL || 'http://localhost:3000'
const api = axios.create({ baseURL })

export const get{{Features}} = () => api.get('/{{features}}')
export const get{{Feature}} = (id: string) => api.get(`/{{features}}/${id}`)
export const create{{Feature}} = (data: any) => api.post('/{{features}}', data)
```

### 5.2. Screen

**Dosya:** `frontend/mobile/src/screens/{{Features}}Screen.tsx`

```typescript
import React, { useEffect, useState } from 'react'
import { View, Text, FlatList, StyleSheet } from 'react-native'
import { get{{Features}} } from '../api/{{features}}'

export default function {{Features}}Screen() {
  const [rows, setRows] = useState<any[]>([])

  useEffect(() => {
    get{{Features}}().then((response) => setRows(response.data))
  }, [])

  return (
    <View style={styles.container}>
      <Text style={styles.title}>{{Features}}</Text>
      <FlatList
        data={rows}
        keyExtractor={(item) => item.id}
        renderItem={({ item }) => (
          <View style={styles.item}>
            <Text style={styles.itemName}>{item.name}</Text>
            <Text style={styles.itemDesc}>{item.description}</Text>
          </View>
        )}
      />
    </View>
  )
}

const styles = StyleSheet.create({
  container: { padding: 16 },
  title: { fontSize: 18, fontWeight: '600', marginBottom: 8 },
  item: { paddingVertical: 8, borderBottomWidth: 1, borderColor: '#eee' },
  itemName: { fontSize: 16, fontWeight: '500' },
  itemDesc: { fontSize: 14, color: '#666' }
})
```

---

## üåç 6. i18n (Opsiyonel)

### 6.1. T√ºrk√ße √áeviriler

**Dosya:** `packages/core/src/i18n/tr.ts`

```typescript
export default {
  // Mevcut...
  {{features}}: {
    title: '{{Features}}',
    add: 'Yeni {{Feature}} Ekle',
    edit: '{{Feature}} D√ºzenle',
    delete: '{{Feature}} Sil',
    name: 'Ad',
    description: 'A√ßƒ±klama',
    price: 'Fiyat'
  }
}
```

### 6.2. ƒ∞ngilizce √áeviriler

**Dosya:** `packages/core/src/i18n/en.ts`

```typescript
export default {
  // Mevcut...
  {{features}}: {
    title: '{{Features}}',
    add: 'Add {{Feature}}',
    edit: 'Edit {{Feature}}',
    delete: 'Delete {{Feature}}',
    name: 'Name',
    description: 'Description',
    price: 'Price'
  }
}
```

---

## üöÄ 7. KOMUT AKI≈ûI

### Adƒ±m Adƒ±m:

```bash
# 1. Core & Shared build
pnpm --filter @deneme1/core build
pnpm --filter @deneme1/shared build

# 2. Prisma migration
cd backend/api
npx prisma migrate dev --name add_{{features}}
npx prisma generate

# 3. Backend dev
pnpm dev:api
# ‚Üí http://localhost:3000/docs (Swagger'da /{{features}} g√∂r√ºn√ºr)

# 4. Frontend dev
pnpm dev:web
# ‚Üí http://localhost:5173
```

---

## ‚úÖ √ñRNEK: Product Mod√ºl√º

### Deƒüi≈üken Deƒüerleri:

- **{{Feature}}** ‚Üí `Product`
- **{{feature}}** ‚Üí `product`
- **{{Features}}** ‚Üí `Products`
- **{{features}}** ‚Üí `products`

### Olu≈üturulacak Dosyalar:

```
‚úÖ packages/core/src/entities/Product.ts
‚úÖ packages/core/src/validation/product.schema.ts
‚úÖ packages/core/src/validation/index.ts (export ekle)
‚úÖ packages/shared/src/index.ts (export ekle)
‚úÖ backend/api/prisma/schema.prisma (model Product)
‚úÖ backend/api/src/modules/products/products.module.ts
‚úÖ backend/api/src/modules/products/products.service.ts
‚úÖ backend/api/src/modules/products/products.controller.ts
‚úÖ backend/api/src/modules/products/dto.ts
‚úÖ backend/api/src/app.module.ts (ProductsModule import)
‚úÖ frontend/web/src/components/Products/ProductsTable.tsx
‚úÖ frontend/web/src/components/Products/ProductForm.tsx
‚úÖ frontend/web/src/pages/ProductsPage.tsx
‚úÖ frontend/web/src/lib/api.ts (products API functions)
‚úÖ frontend/mobile/src/api/products.ts
‚úÖ frontend/mobile/src/screens/ProductsScreen.tsx
```

**Toplam:** ~16 dosya olu≈üturulur/g√ºncellenir

---

## ü§ñ CURSOR ƒ∞LE KULLANIM

### Y√∂ntem 1: Doƒürudan Prompt

```
"FEATURE_TEMPLATE.md dosyasƒ±nƒ± kullanarak Product mod√ºl√º olu≈ütur.
T√ºm {{Feature}} yerine Product, {{feature}} yerine product yaz.
Dosyalarƒ± tam olarak template'teki gibi olu≈ütur."
```

### Y√∂ntem 2: B√∂l√ºm B√∂l√ºm

```
"FEATURE_TEMPLATE.md B√∂l√ºm 1'i kullanarak Product entity ve validation olu≈ütur."
"FEATURE_TEMPLATE.md B√∂l√ºm 3'√º kullanarak NestJS module olu≈ütur."
"FEATURE_TEMPLATE.md B√∂l√ºm 4'√º kullanarak React components olu≈ütur."
```

### Y√∂ntem 3: Manuel Copy-Paste

1. Template'i a√ß
2. Find & Replace: `{{Feature}}` ‚Üí `Product`
3. Dosyalarƒ± olu≈ütur
4. Build & test

---

## ‚ö†Ô∏è √ñNEMLƒ∞ NOTLAR

### Para Birimi (Currency)

```typescript
// ‚úÖ DOƒûRU: Database'de cents
price: 10000  // 100.00 TL

// ‚úÖ DOƒûRU: Frontend'de fmtTRY kullan
<td>{fmtTRY(product.price)}</td>  // "‚Ç∫100"

// ‚ùå YANLI≈û: √áifte b√∂lme yapma
<td>{fmtTRY(product.price / 100)}</td>  // fmtTRY zaten /100 yapƒ±yor!
```

### Validation

```typescript
// ‚úÖ Frontend: Zod
import { ProductSchema } from '@shared'
const result = ProductSchema.safeParse(formData)

// ‚úÖ Backend: class-validator (automatic via ValidationPipe)
export class CreateProductDto {
  @IsString()
  name: string
}
```

### Path Aliases

```typescript
// ‚úÖ Frontend
import { api } from '@/lib/api'
import { ProductCard } from '@/components/Products/ProductCard'
import { Product } from '@shared'
import { fmtTRY } from '@core/utils/money'

// ‚úÖ Backend
import { PrismaService } from '../../common/prisma.service'
import { Product } from '@core/entities/Product'
```

---

## üîÑ SE√áENEK 2'YE (Tam CLI) GE√áƒ∞≈û

### ƒ∞leride otomatik CLI sistemi istersen:

**Ne Yapƒ±lacak:**

1. **Handlebars ekle:**
```bash
pnpm add -D handlebars
```

2. **scaffold.mjs olu≈ütur:**
```bash
# 300+ satƒ±r script
# Template'leri Handlebars ile compile eder
```

3. **Script ekle:**
```json
{
  "scripts": {
    "scaffold": "node scripts/scaffold.mjs"
  }
}
```

4. **Kullan:**
```bash
pnpm scaffold Product
# ‚Üí T√ºm dosyalar otomatik olu≈üur!
```

**Ge√ßi≈ü Kolaylƒ±ƒüƒ±:**
- ‚úÖ Bu template'teki pattern'ler aynƒ±
- ‚úÖ Hi√ßbir kod deƒüi≈ümez
- ‚úÖ Sadece otomasyon eklenir
- ‚úÖ 1 saatte ge√ßi≈ü yapƒ±lƒ±r

**Ne Zaman Ge√ß:**
- Proje b√ºy√ºd√ºƒü√ºnde (10+ mod√ºl)
- Sƒ±k feature ekliyorsan
- Ekip b√ºy√ºd√ºƒü√ºnde
- Consistency √ßok √∂nemliyse

---

## üìù CHECKLIST

Yeni mod√ºl eklerken kontrol et:

- [ ] ‚úÖ Domain entity olu≈üturuldu
- [ ] ‚úÖ Validation schema eklendi
- [ ] ‚úÖ Validation index'e export edildi
- [ ] ‚úÖ Shared'a export edildi
- [ ] ‚úÖ Prisma model eklendi
- [ ] ‚úÖ Migration √ßalƒ±≈ütƒ±rƒ±ldƒ±
- [ ] ‚úÖ NestJS module olu≈üturuldu (4 dosya)
- [ ] ‚úÖ AppModule'e import edildi
- [ ] ‚úÖ Frontend components olu≈üturuldu
- [ ] ‚úÖ Frontend page olu≈üturuldu
- [ ] ‚úÖ API client fonksiyonlarƒ± eklendi
- [ ] ‚úÖ Mobile API client olu≈üturuldu
- [ ] ‚úÖ Mobile screen olu≈üturuldu
- [ ] ‚úÖ i18n √ßevirileri eklendi
- [ ] ‚úÖ Core & Shared build yapƒ±ldƒ±
- [ ] ‚úÖ Backend test edildi (Swagger)
- [ ] ‚úÖ Frontend test edildi (Browser)

---

## üéâ BA≈ûARIYLA TAMAMLA!

Template kullanarak tutarlƒ± mod√ºller olu≈üturabilirsin.

**Hatƒ±rla:**
- Para: cents (DB) ‚Üí fmtTRY(cents) ‚Üí "‚Ç∫X" (Display)
- Validation: Zod (shared) + class-validator (backend)
- Paths: @, @core, @shared aliases kullan

**ƒ∞yi geli≈ütirmeler! üöÄ**

